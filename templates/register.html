<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../static/styles/register.css" />

    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.0.8/css/all.css"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
    />
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <title>Register</title>
  </head>
  <body onload="my_alert()">
     <!--Navbar-->
     <div class="nav">
      <div class="two">
        <a href="/"><img src="../static/images/edzetta original logo.png" alt="" /> 
        </a> 
      </div>
  
      <div id="overlay">
        <div class="navcard"></div>
      </div>
  
      <div class="hb">
        <a id="btnhb" href="#" class="hamburger hide-for-dekstop">
          <span></span>
          <span></span>
          <span></span>
        </a>
      </div>
  
      <div class="one">
        <a href="/" style="text-decoration: none">
          <p>Home</p>
        </a>
        <a href="courses" style="text-decoration: none">
          <p>Courses</p>
        </a>
        <a href="blogs" style="text-decoration: none">
          <p>Blog</p>
        </a>
        <p>About</p>
      </div>
  
      <div class="three">
        <img src="../static/images/PHONE 1.png" alt="" />
        <p class="call" data-toggle="modal" data-target="#myModal1" style="cursor: pointer">
          Request Callback
        </p>
      </div>
    </div>
  
    <div id="hm" class="header__menu hide-for-dekstop hide-for-mobile">
      <a href="/" style="text-decoration: none">
        <p>Home</p>
      </a>
      <a href="courses" style="text-decoration: none">
        <p>Course</p>
      </a>
      <a href="blogs" style="text-decoration: none">
        <p>Blog</p>
      </a>
      <a href="./about.html" style="text-decoration: none">
        <p>About</p>
      </a>
      <a href="./about.html" style="text-decoration: none"></a>
      <p class="call" data-toggle="modal" data-target="#myModal1" style="cursor: pointer;     color: #195ED8;
            text-align: center;
            font-family: 'Overpass', sans-serif;">
        Request Callback
      </p>
  
    </div>
  
    <!--End of Navbar-->



  
    <div class="grid-container">


      <div class="cb"   onclick="chatbox_open()" id="chatbubble"  >
        <img class="cb_img" src="../static/images/chatbox.png" alt="">
      </div>
  
      <div class="iframe_parent" id="chatbox" style="display: none;">
        <p class="p_chatbox">Edzeeta Chatbot</p>
        <div class="close-container" onclick="chatbox_close()">
          <div class="leftright"></div>
          <div class="rightleft"></div>
          <!-- <label class="close">close</label> -->
        </div>
        <iframe src="http://127.0.0.1:5000/chatbot" class="i_frame" title="W3Schools Free Online Web Tutorials"></iframe>
      </div>




      <!-- {% with messages = get_flashed_messages() %}
  {% if messages %}
  
    <ul class=flashes style="z-index: 1; position: absolute; left: 50%;
    top: 50%;">
    {% for message in messages %}
      <li >{{ message }}</li>
    {% endfor %}
    </ul>
  {% endif %}
  
   
{% endwith %} -->
<h1 style="display: none;" id="msg" >{{msg}}</h1>
<div class="alert alert-success alert-dismissible a" id="s" style="display: none;">
  <a href="#" class="close" data-dismiss="alert" aria-label="close" style="margin-top: 0;"    >&times;</a>
  {{msg}}
</div>

<div class="alert alert-danger alert-dismissible a" id="e" style="display: none;" >
  <a href="#" class="close" data-dismiss="alert" aria-label="close" style="margin-top: 0;"   >&times;</a>
  You have already registered for a Trial class!
</div>

<p id="flagg_3" style="display: none;">{{msg3}}</p>
<div class="alert alert-danger alert-dismissible a" id="e_two" style="display: none;" >
  <a href="#" class="close" data-dismiss="alert" aria-label="close"  style="margin-top: 0;"  >&times;</a>
  {{msg3}}
</div>

<p id="flagg" style="display: none;">{{msg2}}</p>

<div class="alert alert-success alert-dismissible a" id="ss" style="display: none;">
  <a href="#" class="close" data-dismiss="alert" aria-label="close" style="top: -60px;" >&times;</a>
  Callback Request Sent
</div>

      <div class="grid-item grid-item-1">
        <img class="imgbx" src="../static/images/kid.png" alt="" />
        <div>
         
      
        </div>
      </div>
      <div class="grid-item grid-item-2">
        <div class="card reg form">
          <article class="card-body">
            <h2 align="center">Get a Free Trial Now</h2>
            <br />

            <!-- form-group// parent name -->
            <form  method="POST">
              <div class="form-group input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">
                    <i class="fa fa-user"></i>
                  </span>
                </div>
                <input
                  name="parentName"
                  id="parentName"
                  class="form-control"
                  placeholder="Parent's name"
                  type="text"
                  pattern="[a-zA-Z\s]+"
                  title="Eg:Ram Kumar"
                  required
                />
              </div>

              <!-- form-group// parent email -->
              <div class="form-group input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">
                    <i class="fa fa-envelope"></i>
                  </span>
                </div>
                <input
                  name="emailId"
                  class="form-control"
                  placeholder="Parent's email address"
                  type="email"
                  required
                />
              </div>

              <!-- form-group// phone number -->
              <div class="form-group input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">
                    <i class="fa fa-phone"></i>
                  </span>
                </div>
                <input
                  name="phoneNo"
                  class="form-control"
                  placeholder="Phone number"
                  type="tel"
                  pattern="[0-9]{10}||[+][0-9]{12}||[0][0-9]{10}||[+][0-9]{12}||[0][0-9]{10}"
                  title="Enter 10 digit number"
                  oninput="this.setCustomValidity('')"
                  required
                />
              </div>

              <!-- form-group// Kid name -->
              <div class="form-group input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">
                    <i class="fa fa-user"></i>
                  </span>
                </div>
                <input
                  name="childName"
                  class="form-control"
                  placeholder="Kid's name"
                  pattern="[a-zA-Z\s]+"
                  title="Eg:Ram Kumar"
                  type="text"
                  required
                />
              </div>

              <!-- form-group// Kids age -->
              <div class="form-group input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">
                    <i class="fa fa-user"></i>
                  </span>
                </div>
                <input
                  name="age"
                  class="form-control"
                  placeholder="Kid's age"
                  type="number"
                  pattern="[0-9]{2}"
                  title="Enter a number"
                  required
                />
              </div>

              <!-- form-group// choose course -->
              <div class="form-group input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">
                    <i class="fa fa-book"></i>
                  </span>
                </div>
                <select class="custom-select select" name="courseName" required>
                  <option value="" disabled="disabled">
                    <p>Select Course</p>
                  </option>
                  <option value="Scratch Programming">Scratch Programming</option>
                  <option value="App Inventor">App Inventor</option>
                  <!-- <option value="Web Development">Web Development</option> -->
                  <option value="Python Programming">Python Programming</option>
                </select>
                <span class="course-link"
                  ><a href="./parent_course.html" class="btn"
                    >View All Courses</a
                  ></span
                >
              </div>

              <!-- form-group// Time Slot -->
              <div class="form-group input-group">
                <button
                  type="button"
                  class="btn"
                  id="time"
                  data-toggle="modal"
                  data-target="#myModal"
                  onclick="cap_me(  )"
                >
                  Time Slot
                </button>
                <span><p id="course_time_validate"></p></span>
              </div>

              <!-- form-group// Laptop/PC -->
              <div class="form-group">
                <input type="checkbox" value="1" name="laptop" />
                <span class="text">Have a Laptop/Computer</span>
              </div>

              <!-- form-group// Register -->
              <div class="form-group">
                <input
                  type="submit"
                  class="btn btn-primary btn-block"
                  value="Register"
                  onclick="validate()"
                />
                <div style="display: none;" class="disclaimer">
                  <a href="./Termify _ Generate Terms & Conditions.html"
                    >By registering, I agree to Edzeeta Terms & Conditions and
                    Privacy Policy</a
                  >
                </div>
              </div>

              <!-- form-group// hidden date and time -->
              <div class="form-group input-group">
                <input
                  type="text"
                  name="slotDate"
                  class="hide"
                  id="date"
                  required
                />
                <input
                  type="text"
                  name="slotTime"
                  class="hide"
                  id="slot"
                  required
                />
              </div>
              <!-- form-group// -->
            </form>
          </article>
        </div>
      </div>
    </div>

    <!--------- Modal Box --------->
    <div class="modal fade" id="myModal" role="dialog">
      <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <h4>Time Slot</h4>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              style="outline: 0px; position: absolute;
              left: 88%;"
              
            >
              &times;
            </button>
          </div>

          <div class="modal-body">
            <div class="dates">
              <!-- <ul>

                <div class="d" id="Aug23" onclick="fetch_date(this.id)">
                  <li>
                    <div class="month">Aug</div>
                    <div class="day">23</div>
                  </li>
                </div>
                <div class="d" id="Aug24" onclick="fetch_date(this.id)">
                  <li>
                    <div class="month">Aug</div>
                    <div class="day">24</div>
                  </li>
                </div>
                <div class="d" id="Aug25" onclick="fetch_date(this.id)">
                  <li>
                    <div class="month">Aug</div>
                    <div class="day">25</div>
                  </li>
                </div>
                <div class="d" id="Aug26" onclick="fetch_date(this.id)">
                  <li>
                    <div class="month">Aug</div>
                    <div class="day">26</div>
                  </li>
                </div>
                <div class="d" id="Aug27" onclick="fetch_date(this.id)">
                  <li>
                    <div class="month">Aug</div>
                    <div class="day">27</div>
                  </li>
                </div>
              </ul> -->
            
              <ul>
           

                {% for d in date %}
                {% set myIndex = date.index(d) %}
    
                <div class="d" id={{d}} onclick="fetch_date(this.id, '{{d}}',  )">
                  <li>
                    {% set list1 = d.split(',') %}
                     <div class="month"> {{list1[0]}}</div>
                      <div > {{list1[1]}}</div>
                
                  
                      
                      
                    <!-- <div class="month">{{d}}</div> -->
                  
                    
                    <p style="display: none;" class="index">{{myIndex}}</p>
                   
                  </li>
                </div>
        
                {% endfor %}

                {% for t in time %}
                {% set myIndex2 = time.index(t) %}
                
                {% for x in t   %}


                  <div class="my_date_parent" > 
                    <p style="display:none;" class="{{ myIndex2}} ">{{x}}</p>
                    <h5 style="display:none;" class="inde" >{{myIndex2}}</h5>
                    
                  </div>
                    
                 


                {% endfor %}

                {% endfor %}
          

               </ul>
              
            



            </div>

            <div class="time_slot">
               <ul>
                <div class="t delete" id="0" onclick="fetch_time(this.id)">
                  <li>--</li>
                </div>
                <div class="t delete" id="1" onclick="fetch_time(this.id)">
                  <li>--</li>
                </div>
                <div class="t delete" id="2" onclick="fetch_time(this.id)">
                  <li>--</li>
                </div>
                <div class="t delete" id="3" onclick="fetch_time(this.id)">
                  <li>--</li>
                </div>
                <div class="t delete" id="4" onclick="fetch_time(this.id)">
                  <li>--</li>
                </div>
                <div class="t delete" id="5" onclick="fetch_time(this.id)">
                  <li>--</li>
                </div>
                <div class="t delete" id="6" onclick="fetch_time(this.id)">
                  <li>--</li>
                </div>
                <div class="t delete" id="7" onclick="fetch_time(this.id)">
                  <li>--</li>
                </div>

                
              </ul> 
            
             
            </div>
          </div>
          <div class="modal-footer">
            <p id="date_time_validate">Please choose date and time</p>
            <button type="button" class="btn" id="ok" onclick="fetch()">
              OK
            </button>
          </div>
        </div>
      </div>
    </div>




  
  <!--------Modal for Callback-------->
  <div class="modal fade" id="myModal1" role="dialog">
    <div class="modal-dialog">
      <!-- Modal content-->
      <form action="/callback" method="post">
        <div class="modal-content">
          <div class="modal-header">
            <h4>Request for a Callback</h4>
            <button type="button" class="close" data-dismiss="modal" style="outline: 0px; position: absolute;
            left: 87%;">
              &times;
            </button>
          </div>
          <div class="modal-body">
            <div class="form-group input-group">
              <!-- <label class="call_phone">Phone Number</label>
              <label for="">test</label> -->
              <p style="font-weight: bold;">Phone Number</p>
              <div class="phoneno_parent" style=" position: absolute;    left: 50%; " >
                <input name="phoneNo" class="form-control call_request" type="tel" pattern="[0-9]{10}||[+][0-9]{12}||[0][0-9]{10}||[+][0-9]{12}||[0][0-9]{10}""
                title="Enter 10 digit number" oninput="this.setCustomValidity('')" required />
              </div>
    
            </div>

            <div class="form-group input-group" style="display: none;">
              <label class="call_phone">Phone Number</label>
              <input class="form-control call_request" type="text" name="formName" value="register" />
            </div>

            <div class="form-group input-group">
              <!-- <label class="call_date">Date</label> -->
              <p  style="font-weight: bold;" >Date</p>
              <div class="date_parent"  style=" position: absolute;    left: 50%; width: 156px; " ><input name="date" class="form-control call_request" type="date" required /></div>
              
            </div>

            <div class="form-group input-group">
              <!-- <label class="call_time">Time</label> -->
              <p style="font-weight: bold;" >Time</p>
              <div class="time_parent"  style=" position: absolute;    left: 50%; "  >
                <input name="time" class="form-control call_request" type="time" required />
              </div>
            
            </div>
          </div>
          <div class="modal-footer">
            <input type="submit" class="btn" id="request" value="Request" name="r" onclick="request_call()" />
          </div>
        </div>
      </form>
    </div>
  </div>

  <!-------------Javascript------------>

  <script>
    function cap_me()
    {

      var today = new Date();
      var dd = String(today.getDate()).padStart(2, '0');
      var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
      var yyyy = today.getFullYear();

      today = mm + '/' + dd + '/' + yyyy;
     

      var check=parseInt(dd);




     

       console.log("date is " + dd )
      // console.log("cap me called")
      var y =document.getElementsByClassName("month")
      for (var i=0;i<y.length;i++)
      {
        //  console.log( y[i].innerHTML)
        var s = y[i].innerHTML
        s=s.slice(0,3)
         console.log("this is  s"+s)
         
        if(s<=check)
        {
          // add delete me logic
          console.log("delete me")
          console.log(y[i].parentElement.parentElement.style.display = 'none')
        }
        
      }
      
    }
      function chatbox_open()
          {
            console.log("open")
            var x = document.getElementById('chatbubble')
            x.style.display = 'none'
            var y = document.getElementById("chatbox")
            y.style.display = 'flex'
          }

          function chatbox_close()
          {
            console.log("close")
            var x = document.getElementById('chatbubble')
            x.style.display = 'flex'
            var y = document.getElementById("chatbox")
            y.style.display = 'none'
          }

    function my_alert()
    {

      
            
              var xx = document.getElementById("flagg").innerHTML
            
              
               if(xx=="Success")
               {
                var sx = document.getElementById('ss')
                sx.style.display = "block";
               }
               
               
          



      var test=0;
      console.log('working')
      var s = document.getElementById('s')
      var e = document.getElementById('e')
      var flag = document.getElementById("msg")
      // s.style.display = "block";
      // e.style.display = "block";
      console.log(flag.innerHTML)
      if(flag.innerHTML == "You have already registered for a Trial class!")
      {
        test=1;
        e.style.display = "block";
      }
      else if(flag.innerHTML!=0 && test==0)
      {
        s.style.display = "block";
        console.log("inside second if")
        console.log(test)
      }

      var count_error = document.getElementById("flagg_3").innerHTML
      if(count_error=="Slot already full! Choose another slot")
      {
        document.getElementById("e_two").style.display = "block";
      }

    }
    var selected_date = null;
    var selected_time = null;

    /*---------- Selecting Date ---------*/
    async function fetch_date(selected_id, d) {

      














      if (selected_date != null) {
        document.getElementById(selected_date).style.border = "0px";
      }
      document.getElementById(selected_id).style.border = "3px solid black";
      selected_date = selected_id;
      
      

      var date = [];
      // var x = document.getElementsByClassName("index")
      // for(var i=0; i<x.length; i++)
      // {
      //   console.log(x[i].innerHTML)
      //   // date.push()
      // }
      var y =document.getElementById(d).children[0].children[2].innerHTML
      console.log("this is yy" )
       console.log(y)


      var z=document.getElementsByClassName("my_date_parent")
      console.log(z[0].children)
      for(var i=0;i<z.length; i++)
      {
        // console.log("this is value" +  z[i].children[0].innerHTML)
        // console.log("this is index" + z[i].children[1].innerHTML)

        console.log("this is d" + d)
      }



      var p= document.getElementsByClassName("time_slot")
      var q = p[0].children[0].children; //iterare over it

      for(var i=0; i<q.length; i++)
      {
       
        q[i].children[0].innerHTML="--"

       
      }


      var c=0;
      for(var i=0; i<z.length; i++)
      {
        
        if (y==z[i].children[1].innerHTML)
        {
         
          
          console.log(z[i].children[1])
          c=c+1;
          console.log(c)

          // console.log(z[i].children[0].innerHTML)
          date.push(z[i].children[0].innerHTML)
         
        }
       

        


        // if (y==z[i].children[1].innerHTML)
        // {
        //     console.log(z[i].children[1])


                
        //   q[i].children[0].innerHTML=z[i].children[0].innerHTML
        // }
        // console.log( "this is q " +q[i].children[0].innerHTML)

        //   for(var j=0;j<z.length; j++)
        // {
        //   console.log(z[j].innerHTML)

        // }

        // q[i].children[0].innerHTML=z[i].innerHTML

        // console.log(  q[i].children[0].parentElement)
        // q[i].children[0].parentElement.id=z[i].innerHTML
        // q[i].children[0].parentElement.classList.remove("delete") 
        //   var elmnt = document.getElementsByClassName("delete");
        // //  elmnt.remove();
        //  console.log(elmnt)
      } 
      console.log(date)
      for(var i=0;i<date.length;i++)
      {
        q[i].children[0].innerHTML=date[i]
      }
      
      

      // console.log(x)

      

    }

    /*---------- Selecting time ---------*/
    function fetch_time(selected_id) {
      console.log("im called")
      console.log(selected_time)
      var p= document.getElementsByClassName("time_slot")
      var q = p[0].children[0].children;
      if (selected_time != null) {
        //  q[x].children[0].style.border = "0px";
         q[x].children[0].parentElement.style.border = "0px";
      }
      document.getElementById(selected_id).style.border = "3px solid black";
      
     
      console.log(selected_id)
      console.log(q[selected_id].children[0].innerHTML)
       
      selected_time = q[selected_id].children[0].innerHTML;
       x=selected_id
    }

    /*------------Initializing the Date and time ------------*/
    function fetch() {
      if (selected_date != null && selected_time != null) {
        document.getElementById("date").value = selected_date;
        document.getElementById("slot").value = selected_time;
        $("#myModal").modal("hide");
        document.getElementById("course_time_validate").innerHTML = "";
      } else {
        document.getElementById("date_time_validate").style.visibility =
          "visible";
      }
    }

    /*-----------Validation--------*/
    function validate() {
      var inp = document.getElementsByTagName("input");
      if (
        inp[0].value != "" &&
        inp[1].value != "" &&
        inp[2].value != "" &&
        inp[3].value != "" &&
        inp[4].value != ""
      ) {
        if (
          document.getElementById("date").value == "" &&
          document.getElementById("slot").value == ""
        ) {
          document.getElementById("course_time_validate").innerHTML =
            "Please choose a time slot";
          document.getElementById("course_time_validate").style.visibility =
            "visible";
          document.getElementById("time").focus();
          e.preventDefault();
          return false;
        }
      }
    }
  </script>

  <!----------------- Request for Callback Popup---------- -->
  <script>
    var date, time, phone;
    function request_call() {
      var inp = document.getElementsByClassName("call_request");
      if (inp[0].value != "" && inp[1].value != "" && inp[2].value != "") {
        phone = inp[0].value;
        date = inp[1].value;
        time = inp[2].value;
        $("#myModal1").modal("hide");
      }
    }
  </script>

  <!-- script for hamburger -->
  <script>
    const btnhb = document.querySelector("#btnhb");
    const overlay = document.querySelector("#overlay");
    const hm = document.querySelector("#hm");
    btnhb.addEventListener("click", function () {
      if (btnhb.classList.contains("open")) {
        btnhb.classList.remove("open");
      } else {
        btnhb.classList.add("open");
      }

      if (overlay.classList.contains("overlay")) {
        overlay.classList.remove("overlay");
        overlay.classList.add("fade-out");
      } else {
        overlay.classList.add("overlay");
      }

      if (hm.classList.contains("hide-for-mobile")) {
        hm.classList.remove("hide-for-mobile");
      } else {
        hm.classList.add("hide-for-mobile");
      }
    });
  </script>
</html>
